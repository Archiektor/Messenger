{"version":3,"sources":["redux/dialogs-reducer.ts","components/common/FormsControl/FormsControl.tsx","assets/images/saitama.png","components/utils/objects-helper.ts","redux/users-reducer.ts","components/icons/whatsapp.png","assets/images/preloader.svg","components/icons/heart.png","components/navbar/navbar.module.css","components/api/api.ts","redux/profile-reducer.ts","redux/friends-reducer.ts","redux/auth-reducer.ts","redux/app-reducer.ts","redux/redux-store.ts","components/header/header.tsx","components/header/HeaderContainer.tsx","components/friends/index.tsx","components/friends/friends.tsx","components/navbar/index.tsx","components/navbar/navbar.tsx","components/profile/profileinfo/ProfileStatusHooks.tsx","components/profile/profiledata/ProfileData.tsx","components/profile/ProfileDataForm/ProfileDataForm.tsx","components/profile/profileinfo/index.tsx","components/profile/profileinfo/profileinfo.tsx","components/profile/post/index.tsx","components/profile/post/post.tsx","components/profile/myposts/myPosts.tsx","components/profile/myposts/myPostsContainer.tsx","components/profile/profile.tsx","components/profile/ProfileContainer.tsx","components/login/login.tsx","components/hoc/withSuspense.tsx","App.tsx","index.tsx","components/utils/validators/validators.ts","components/profile/ProfileDataForm/ProfileDataForm.module.scss","components/profile/profiledata/ProfileData.module.css","components/common/Preloader/Preloader.tsx","components/login/login.module.scss","components/friends/friends.module.css","components/common/FormsControl/FormsControl.module.scss","components/profile/post/post.module.css","components/profile/profileinfo/profileinfo.module.css","components/profile/myposts/myposts.module.css","components/header/header.module.css"],"names":["ADD_MESSAGE","addNewMessageAC","newMsg","type","initialState","messages","id","v1","text","dialogs","key","name","dialogsReducer","partOfStateCopy","partOfState","action","FormControl","input","meta","touched","error","children","hasError","className","s","textarea","textarea_error","textarea__span","CustomTextArea","props","restProps","CustomInput","createField","placeholder","component","validators","validate","module","exports","updateObjectInArray","items","itemId","objPropName","newObjProps","map","item","FOLLOW","UNFOLLOW","SET_USERS","followSuccess","userId","unfollowSuccess","setCurrentPage","currentPage","switchIsFetching","isFetching","switchIsLoading","isLoading","users","pageSize","totalUsersCount","disabledUsers","getUsersThunkCreator","page","dispatch","a","UserApi","getUsers","data","totalCount","followUnfollowFlow","fn","flowSuccess","resultCode","unfollowUserThunkCreator","unfollowUser","followUserThunkCreator","followUser","usersReducer","followed","filter","instance","axios","create","baseURL","withCredentials","headers","get","Error","delete","post","showProfile","AuthAPI","authMe","loginMe","email","password","rememberMe","captcha","remeberMe","logoutMe","ProfileApi","getStatus","updateStatus","status","put","savePhoto","photoFile","formData","FormData","append","saveProfile","securityApi","getCaptchaUrl","deepCopyFunction","incomeObj","returnedObj","value","Array","isArray","ADD_POST","SET_USER_PROFILE","SET_STATUS","DELETE_POST","setStatus","posts","message","likesCount","newPostText","profile","showProfileThunkCreator","updateStatusThunkCreator","profileReducer","newPostBody","p","postId","newCopyOfState","photos","small","large","friends","age","picture","friendsReducer","SET_USER_DATA","setAuthUserData","login","isAuth","payload","captchaUrl","AuthMeThunkCreator","LoginOutThunkCreator","alert","url","authReducer","initialized","appReducer","reducers","combineReducers","profilePage","dialogsPage","usersPage","friendsPage","auth","form","formReducer","app","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","Header","header","src","logo","alt","loginBlock","onClick","to","HeaderContainer","this","Component","connect","state","Friends","css","friendsWrapper","friend","oneFriendWrapper","oneFriendPicture","oneFriendName","Navbar","cssClasses","nav","activeClassName","activeLink","ProfileStatusHooks","useState","editMode","setEditMode","useEffect","onDoubleClick","onChange","e","currentTarget","autoFocus","onBlur","ProfileData","isOwner","gotoEditMode","Fragment","mainInfo","btn","personImg","profImg","saitama","files","length","userInfo","fullName","lookingForAJob","lookingForAJobDescription","aboutMe","textWrapper","contacts","facebook","github","ProfileDataFormReduxForm","reduxForm","handleSubmit","onSubmit","formWrapper","formWrapper__btn","formWrapper__error","formWrapper__name","formWrapper__job","formWrapper__skills","formWrapper__about","ProfileInfo","wrapper","border","bgImg","initialValues","Preloader","Post","active","avatar","like","MyPosts","React","memo","addPost","postElements","postsBlock","addPostBlock","MyPostsReduxForm","newPostMessage","maxLength10","maxLengthCreator","Field","required","MyPostsContainer","addPostAC","Profile","ProfileContainer","match","params","authorizedUserId","Number","getStatusThunkCreator","history","push","refreshProfile","prevProps","prevState","snapshot","savePhotoThunkCreator","saveProfileThunkCreator","PureComponent","withUrlDataContainerComponent","withRouter","file","getState","errMsg","stopSubmit","_error","maxLength30","LoginReduxForm","remember","remember__span","summaryError","LoginMeThunkCreator","withSuspense","fallback","DialogsContainer","lazy","UsersContainer","News","Music","Settings","App","initializeAppThunkCreator","exact","path","render","ReactDOM","StrictMode","document","getElementById","max","trim","inlineStyle","display","width","height","margin","style","preloader"],"mappings":"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","file":"static/js/main.71695422.chunk.js","sourcesContent":["import {v1} from \"uuid\";\r\n\r\nconst ADD_MESSAGE = \"network/dialogs/ADD-MESSAGE\";\r\n\r\ntype AddMessageAC = {\r\n    type: typeof ADD_MESSAGE,\r\n    newMsg: string,\r\n};\r\ntype DialogsReducerActionType = AddMessageAC;\r\n\r\nexport type MessageType = {\r\n    id: string,\r\n    text: string,\r\n}\r\nexport type DialogType = {\r\n    key: string,\r\n    id: number,\r\n    name: string,\r\n}\r\n\r\nexport const addNewMessageAC = (newMsg: string): AddMessageAC => ({type: ADD_MESSAGE, newMsg: newMsg});\r\n\r\nlet initialState = {\r\n    messages: [\r\n        {id: v1(), text: \"Hello\"},\r\n        {id: v1(), text: `WTF i'm doing here...`},\r\n        {id: v1(), text: `Alahabara`},\r\n        {id: v1(), text: `For glory`},\r\n        {id: v1(), text: `Soft kitty`},\r\n    ] as Array<MessageType>,\r\n    dialogs: [\r\n        {key: v1(), id: 1, name: \"Nikki\"},\r\n        {key: v1(), id: 2, name: \"Dima\"},\r\n        {key: v1(), id: 3, name: \"Ania\"},\r\n        {key: v1(), id: 4, name: \"Tanya\"},\r\n        {key: v1(), id: 5, name: \"Timur\"},\r\n        {key: v1(), id: 6, name: \"Roxenne\"},\r\n    ] as Array<DialogType>,\r\n}\r\n\r\nexport type DialogsPage = typeof initialState;\r\n\r\nconst dialogsReducer = (partOfState = initialState, action: DialogsReducerActionType): DialogsPage => {\r\n    let partOfStateCopy: DialogsPage;\r\n    switch (action.type) {\r\n        case ADD_MESSAGE: {\r\n            partOfStateCopy = {...partOfState, messages: [...partOfState.messages],};\r\n            partOfStateCopy.messages = [...partOfStateCopy.messages, {id: v1(), text: action.newMsg,}];\r\n            return partOfStateCopy;\r\n        }\r\n        default:\r\n            return partOfState;\r\n    }\r\n}\r\n\r\nexport default dialogsReducer;\r\n","import React from 'react';\r\nimport s from './FormsControl.module.scss';\r\nimport {WrappedFieldInputProps, WrappedFieldMetaProps} from 'redux-form/lib/Field';\r\nimport {Field} from 'redux-form';\r\n\r\ntype FormControlType = {\r\n    input: WrappedFieldInputProps;\r\n    meta: WrappedFieldMetaProps;\r\n}\r\n\r\nconst FormControl: React.FC<FormControlType> = ({input, meta: {touched, error}, children}) => {\r\n    const hasError = touched && error;\r\n    return (\r\n        <div className={hasError ? `${s.textarea} ${s.textarea_error}` : `${s.textarea}`}>\r\n            {children}\r\n            {hasError && <span className={s.textarea__span}>{error}</span>}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const CustomTextArea: React.FC<FormControlType> = (props) => {\r\n    const {input, meta, ...restProps} = props;\r\n    return (\r\n        <FormControl {...props}><textarea {...input} {...restProps}/></FormControl>\r\n    )\r\n}\r\n\r\nexport const CustomInput: React.FC<FormControlType> = (props) => {\r\n    const {input, meta, ...restProps} = props;\r\n    return (\r\n        <FormControl {...props}><input {...input} {...restProps}/></FormControl>\r\n    )\r\n}\r\n\r\nexport const createField = (name: string, placeholder: string, type: string, component: React.FC<FormControlType>, validators: any) => (\r\n    <div>\r\n        <Field name={name} type={type} placeholder={placeholder} component={component}\r\n               validate={[...validators]}/>\r\n    </div>\r\n)\r\n\r\n","module.exports = __webpack_public_path__ + \"static/media/saitama.09967071.png\";","import {UserType} from '../../redux/users-reducer';\r\n\r\ntype ObjPropsType = {\r\n    followed: boolean,\r\n}\r\n\r\nexport const updateObjectInArray = (items : Array<UserType>, itemId: string, objPropName: keyof UserType, newObjProps: ObjPropsType) => {\r\n    return items.map(item => {\r\n        if (item[objPropName] === itemId) {\r\n            return {...item, ...newObjProps}\r\n        }\r\n        return item;\r\n    })\r\n}","import {UserApi} from '../components/api/api';\r\nimport {AppStateType} from './redux-store';\r\nimport {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\nimport {updateObjectInArray} from '../components/utils/objects-helper';\r\n\r\nconst FOLLOW = 'network/users/FOLLOW';\r\nconst UNFOLLOW = 'network/users/UNFOLLOW';\r\nconst SET_USERS = 'network/users/SET_USERS';\r\nconst SET_TOTAL_USERS_COUNT = 'network/users/SET_TOTAL_USERS_COUNT';\r\nconst SET_CURRENT_PAGE = 'network/users/SET_CURRENT_PAGE';\r\nconst SWITCH_IS_FETCHING = 'network/users/SWITCH_IS_FETCHING';\r\nconst SWITCH_IS_LOADING = 'network/users/SWITCH_IS_LOADING';\r\n\r\ntype FollowACType = {\r\n    type: typeof FOLLOW,\r\n    userId: string,\r\n};\r\ntype UnFollowACType = {\r\n    type: typeof UNFOLLOW,\r\n    userId: string,\r\n};\r\ntype SetUsersACType = {\r\n    type: typeof SET_USERS,\r\n    users: Array<UserType>,\r\n};\r\ntype SetTotalUsersCountACType = {\r\n    type: typeof SET_TOTAL_USERS_COUNT,\r\n    totalUsersCount: number,\r\n};\r\ntype SetCurrentPageACType = {\r\n    type: typeof SET_CURRENT_PAGE,\r\n    currentPage: number,\r\n}\r\ntype SwitchIsFetchingACType = {\r\n    type: typeof SWITCH_IS_FETCHING,\r\n    isFetching: boolean,\r\n}\r\ntype SwitchIsLoadingACType = {\r\n    type: typeof SWITCH_IS_LOADING,\r\n    isLoading: boolean,\r\n    userId: string,\r\n}\r\n\r\ntype UsersReducerActionsType = FollowACType | UnFollowACType | SetUsersACType | SetTotalUsersCountACType |\r\n    SetCurrentPageACType | SwitchIsFetchingACType | SwitchIsLoadingACType;\r\n\r\nexport type UserType = {\r\n    id: string,\r\n    photos: {\r\n        small: string,\r\n        large: string\r\n    },\r\n    followed: boolean,\r\n    name: string,\r\n    status: string,\r\n    location: {\r\n        country: string,\r\n        city: string\r\n    }\r\n}\r\n\r\n// Action Creator's\r\nexport const followSuccess = (userId: string): FollowACType => ({type: FOLLOW, userId: userId});\r\nexport const unfollowSuccess = (userId: string): UnFollowACType => ({type: UNFOLLOW, userId: userId});\r\nexport const setUsers = (users: Array<UserType>): SetUsersACType => ({type: SET_USERS, users: users});\r\nexport const setTotalUsersCount = (totalUsersCount: number): SetTotalUsersCountACType => ({\r\n    type: SET_TOTAL_USERS_COUNT,\r\n    totalUsersCount: totalUsersCount\r\n});\r\nexport const setCurrentPage = (currentPage: number): SetCurrentPageACType => ({type: SET_CURRENT_PAGE, currentPage});\r\nexport const switchIsFetching = (isFetching: boolean): SwitchIsFetchingACType => ({\r\n    type: SWITCH_IS_FETCHING,\r\n    isFetching\r\n});\r\nexport const switchIsLoading = (isLoading: boolean, userId: string): SwitchIsLoadingACType => ({\r\n    type: SWITCH_IS_LOADING,\r\n    isLoading,\r\n    userId\r\n});\r\n\r\nexport type UsersPage = {\r\n    users: Array<UserType>,\r\n    pageSize: number,\r\n    totalUsersCount: number,\r\n    currentPage: number,\r\n    isFetching: boolean,\r\n    isLoading: boolean,\r\n    disabledUsers: Array<string>,\r\n}\r\n\r\nlet initialState: UsersPage = {\r\n    users: [],\r\n    pageSize: 5,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: false,\r\n    isLoading: false,\r\n    disabledUsers: [],\r\n}\r\n\r\nconst usersReducer = (partOfState = initialState, action: UsersReducerActionsType): UsersPage => {\r\n    switch (action.type) {\r\n        case FOLLOW: {\r\n            let partOfStateCopy = {\r\n                ...partOfState,\r\n                users: updateObjectInArray(partOfState.users, action.userId, 'id', {followed: true})\r\n            };\r\n            return partOfStateCopy;\r\n        }\r\n        case UNFOLLOW: {\r\n            let partOfStateCopy = {\r\n                ...partOfState,\r\n                users: updateObjectInArray(partOfState.users, action.userId, 'id', {followed: false})\r\n            };\r\n            return partOfStateCopy;\r\n        }\r\n        case SET_USERS: {\r\n            return {...partOfState, users: action.users!}\r\n        }\r\n        case SET_TOTAL_USERS_COUNT: {\r\n            return {...partOfState, totalUsersCount: action.totalUsersCount}\r\n        }\r\n        case SET_CURRENT_PAGE: {\r\n            return {...partOfState, currentPage: action.currentPage}\r\n        }\r\n        case SWITCH_IS_FETCHING: {\r\n            return {...partOfState, isFetching: action.isFetching}\r\n        }\r\n        case SWITCH_IS_LOADING: {\r\n            return {\r\n                ...partOfState,\r\n                disabledUsers: action.isLoading ?\r\n                    [...partOfState.disabledUsers, action.userId] :\r\n                    partOfState.disabledUsers.filter(id => id !== action.userId)\r\n            }\r\n        }\r\n\r\n        default:\r\n            return partOfState;\r\n    }\r\n}\r\n\r\n// type GetStateType = () => AppStateType;\r\ntype ThunkType = ThunkAction<Promise<void>, AppStateType, unknown, UsersReducerActionsType>;\r\n\r\nexport const getUsersThunkCreator = (page: number, pageSize: number): ThunkType => {\r\n    return async (dispatch) => { // getUsersThunk\r\n        dispatch(switchIsFetching(true));\r\n        let data = await UserApi.getUsers(page, pageSize);\r\n        // debugger;\r\n        dispatch(switchIsFetching(false));\r\n        dispatch(setUsers(data.items));\r\n        dispatch(setTotalUsersCount(data.totalCount))\r\n    }\r\n}\r\n\r\ntype CombineFlowType = FollowACType | UnFollowACType;\r\n\r\nconst followUnfollowFlow = async (dispatch: ThunkDispatch<AppStateType, unknown, UsersReducerActionsType>,\r\n                                  userId: string,\r\n                                  fn: Function, flowSuccess: Function) => {\r\n    dispatch(switchIsLoading(true, userId));\r\n    let data = await fn(userId)\r\n    dispatch(switchIsLoading(false, userId));\r\n    if (data.resultCode === 0) {\r\n        dispatch(flowSuccess(userId));\r\n    }\r\n}\r\n\r\nexport const unfollowUserThunkCreator = (userId: string): ThunkType => {\r\n    return async (dispatch) => {\r\n        followUnfollowFlow(dispatch, userId, UserApi.unfollowUser, unfollowSuccess)\r\n        /*        dispatch(switchIsLoading(true, userId));\r\n                let data = await UserApi.unfollowUser(userId)\r\n                dispatch(switchIsLoading(false, userId));\r\n                if (data.resultCode === 0) {\r\n                    dispatch(unfollowSuccess(userId));\r\n                }*/\r\n    }\r\n}\r\n\r\nexport const followUserThunkCreator = (userId: string): ThunkType => {\r\n    return async (dispatch) => { // getFollowUserThunk\r\n        followUnfollowFlow(dispatch, userId, UserApi.followUser, followSuccess)\r\n        /*        dispatch(switchIsLoading(true, userId));\r\n                let data = await UserApi.followUser(userId);\r\n                dispatch(switchIsLoading(false, userId));\r\n                if (data.resultCode === 0) {\r\n                    dispatch(followSuccess(userId));\r\n                }*/\r\n    }\r\n}\r\n\r\nexport default usersReducer;","module.exports = \"data:image/png;base64,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\"","module.exports = __webpack_public_path__ + \"static/media/preloader.a45baea3.svg\";","module.exports = \"data:image/png;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"navbar_nav__7qQ0C\",\"item\":\"navbar_item__1z4HB\",\"activeLink\":\"navbar_activeLink__2dX7F\"};","import axios from 'axios';\r\nimport {UserType} from '../../redux/users-reducer';\r\nimport {UserDataType} from '../../redux/auth-reducer';\r\nimport {UserProfileType} from '../../redux/profile-reducer';\r\nimport {ProfileDataForm} from '../profile/ProfileDataForm/ProfileDataForm';\r\n\r\ntype GetUsersPromiseType = {\r\n    items: Array<UserType>,\r\n    totalCount: 5199,\r\n    error: null\r\n}\r\n\r\nexport type FollowUserType = {\r\n    data: Object,\r\n    messages: Array<string>,\r\n    resultCode: 0,\r\n}\r\n\r\ntype AuthMeType = {\r\n    data: UserDataType,\r\n    messages: Array<string>,\r\n    resultCode: 0,\r\n}\r\n\r\nconst instance = axios.create({\r\n    baseURL: `https://social-network.samuraijs.com/api/1.0/`,\r\n    withCredentials: true,\r\n    headers: {\r\n        'API-KEY': '89761af2-b44e-410b-ac46-74e0e2e39976',\r\n    }\r\n})\r\n\r\nexport const UserApi = {\r\n    getUsers: async (currentPage: number, pageSize: number): Promise<GetUsersPromiseType> => {\r\n        try {\r\n            const {data} = await instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n            // debugger;\r\n            return data;\r\n        } catch (e) {\r\n            throw new Error(e);\r\n        }\r\n    },\r\n    unfollowUser: async (userId: string): Promise<FollowUserType> => {\r\n        try {\r\n            const {data} = await instance.delete(`follow/${userId}`);\r\n            // debugger;\r\n            return data;\r\n        } catch (e) {\r\n            throw new Error(e);\r\n        }\r\n    },\r\n    followUser: async (userId: string): Promise<FollowUserType> => {\r\n        try {\r\n            const {data} = await instance.post(`follow/${userId}`, {});\r\n            // debugger;\r\n            return data;\r\n        } catch (e) {\r\n            throw new Error(e);\r\n        }\r\n    },\r\n    showProfile: async (userId: string): Promise<UserProfileType> => {\r\n        try {\r\n            const {data} = await instance.get(`profile/${userId ? userId : '9187'}`);\r\n            // debugger;\r\n            return data;\r\n        } catch (e) {\r\n            throw new Error(e);\r\n        }\r\n    }\r\n}\r\n\r\nexport const AuthAPI = {\r\n    authMe: async (): Promise<AuthMeType> => {\r\n        try {\r\n            const {data} = await instance.get(`auth/me`);\r\n            return data;\r\n        } catch (e) {\r\n            throw new Error(e);\r\n        }\r\n    },\r\n    loginMe: async (email: string, password: string, rememberMe: boolean = false, captcha?: boolean) => {\r\n        try {\r\n            const {data} = await instance.post(`auth/login`, {\r\n                email: email,\r\n                password: password,\r\n                remeberMe: rememberMe ? rememberMe : false,\r\n                captcha: captcha ? captcha : false,\r\n            });\r\n            return data;\r\n        } catch (e) {\r\n            throw new Error(e);\r\n        }\r\n    },\r\n    logoutMe: async () => {\r\n        try {\r\n            const {data} = await instance.delete(`auth/login`);\r\n            return data;\r\n        } catch (e) {\r\n            throw new Error(e);\r\n        }\r\n    },\r\n}\r\n\r\nexport const ProfileApi = {\r\n    showProfile: async (userId: number): Promise<UserProfileType> => {\r\n        try {\r\n            const {data} = await instance.get(`profile/${userId ? userId : 9187}`);\r\n            return data;\r\n        } catch (e) {\r\n            throw new Error(e);\r\n        }\r\n    },\r\n    getStatus: async (userId: number): Promise<string> => {\r\n        try {\r\n            const {data} = await instance.get(`profile/status/${userId}`);\r\n            return data;\r\n        } catch (e) {\r\n            throw new Error(e);\r\n        }\r\n    },\r\n    updateStatus: async (status: string) => {\r\n        try {\r\n            const {data} = await instance.put(`profile/status`, {status: status});\r\n            return data;\r\n        } catch (e) {\r\n            throw new Error(e);\r\n        }\r\n    },\r\n    savePhoto: async (photoFile: File) => {\r\n        try {\r\n            const formData = new FormData();\r\n            formData.append('image', photoFile);\r\n            const {data} = await instance.put(`profile/photo`, formData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data',\r\n                }\r\n            });\r\n            return data;\r\n        } catch (e) {\r\n            throw new Error(e);\r\n        }\r\n    },\r\n    saveProfile: async (formData: ProfileDataForm) => {\r\n        try {\r\n            const {data} = await instance.put(`profile`, {...formData});\r\n            return data;\r\n        } catch (e) {\r\n            throw new Error(e);\r\n        }\r\n    }\r\n}\r\n\r\ntype CaptchaUrl = {url: string}\r\n\r\nexport const securityApi = {\r\n    getCaptchaUrl: async (): Promise<CaptchaUrl> => {\r\n        try {\r\n            const {data} = await instance.get(`security/get-captcha-url`);\r\n            return data;\r\n        } catch (e) {\r\n            throw new Error(e);\r\n        }\r\n    },\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import {v1} from 'uuid';\r\nimport {ThunkAction} from 'redux-thunk';\r\nimport {AppStateType} from './redux-store';\r\nimport {ProfileApi} from '../components/api/api';\r\nimport {ProfileDataForm} from '../components/profile/ProfileDataForm/ProfileDataForm';\r\nimport {stopSubmit} from 'redux-form';\r\n\r\nconst deepCopyFunction = (incomeObj: any) => {\r\n    let returnedObj: any, key: any, value: any;\r\n    if (typeof incomeObj !== 'object' || incomeObj === null) {\r\n        return incomeObj // Return the value if incomeObj is not an object\r\n    }\r\n    returnedObj = Array.isArray(incomeObj) ? [] : {}\r\n\r\n    for (key in incomeObj) {\r\n        value = incomeObj[key]\r\n        returnedObj[key] = deepCopyFunction(value)\r\n    }\r\n    return returnedObj\r\n}\r\n\r\nconst ADD_POST = 'network/profile/ADD-POST';\r\nconst SET_USER_PROFILE = 'network/profile/SET_USER_PROFILE';\r\nconst SET_STATUS = 'network/profile/SET_STATUS';\r\nconst DELETE_POST = `network/profile/DELETE_POST`;\r\nconst SAVE_PHOTOS_SUCCESS = 'network/profile/SAVE_PHOTOS_SUCCESS';\r\n\r\ntype addPostACType = { type: typeof ADD_POST, newPostBody: string, }\r\ntype setUserProfileACType = {\r\n    type: typeof SET_USER_PROFILE,\r\n    profile: UserProfileType,\r\n}\r\ntype setStatusACType = { type: typeof SET_STATUS, status: string, }\r\ntype deletePostACType = { type: typeof DELETE_POST, postId: string, }\r\ntype savePhotoACType = { type: typeof SAVE_PHOTOS_SUCCESS, photos: { small: string, large: string, } }\r\n\r\ntype ProfileReducerActionType = addPostACType | deletePostACType | setUserProfileACType |\r\n    setStatusACType | savePhotoACType;\r\n\r\nexport type PostType = {\r\n    id: string,\r\n    message: string,\r\n    likesCount: number\r\n}\r\ntype ContactsType = {\r\n    facebook: string,\r\n    website: null | string,\r\n    vk: string,\r\n    twitter: string,\r\n    instagram: string,\r\n    youtube: null | string,\r\n    github: string,\r\n    mainLink: null | string,\r\n}\r\n\r\nexport type UserProfileType = null | {\r\n    aboutMe: string,\r\n    contacts: ContactsType,\r\n    lookingForAJob: boolean,\r\n    lookingForAJobDescription: string,\r\n    fullName: string,\r\n    userId: number,\r\n    photos: {\r\n        small: string,\r\n        large: string,\r\n    }\r\n}\r\n\r\nexport const addPostAC = (text: string): addPostACType => ({type: ADD_POST, newPostBody: text});\r\nexport const setUserProfile = (profile: UserProfileType): setUserProfileACType => ({\r\n    type: SET_USER_PROFILE,\r\n    profile: profile,\r\n})\r\nexport const setStatus = (status: string): setStatusACType => ({\r\n    type: SET_STATUS,\r\n    status: status,\r\n})\r\nexport const deletePost = (postId: string): deletePostACType => ({type: DELETE_POST, postId})\r\nexport const savePhoto = (photos: {\r\n    small: string, large: string\r\n}): savePhotoACType => ({type: SAVE_PHOTOS_SUCCESS, photos})\r\n\r\ntype ProfilePageType = typeof initialState;\r\n\r\nlet initialState = {\r\n    posts: [\r\n        {id: v1(), message: `Hi, how are you ?`, likesCount: 12},\r\n        {id: v1(), message: `Coffin dance ?`, likesCount: 5},\r\n        {id: v1(), message: `I'm too bored`, likesCount: 2},\r\n        {id: v1(), message: `Goint to night fish`, likesCount: 13},\r\n        {id: v1(), message: `Courage`, likesCount: 0},\r\n    ] as Array<PostType>,\r\n    newPostText: '',\r\n    profile: null as UserProfileType | null,\r\n    status: '',\r\n}\r\n\r\nconst profileReducer = (partOfState = initialState, action: ProfileReducerActionType): ProfilePageType => {\r\n    let partOfStateCopy: ProfilePageType;\r\n    switch (action.type) {\r\n        case ADD_POST: {\r\n            partOfStateCopy = {...partOfState, posts: [...partOfState.posts],};\r\n            partOfStateCopy.posts = [...partOfStateCopy.posts, {\r\n                id: v1(),\r\n                message: action.newPostBody,\r\n                likesCount: 0\r\n            }];\r\n            return partOfStateCopy;\r\n        }\r\n        case SET_USER_PROFILE: {\r\n            return {...partOfState, profile: action.profile};\r\n        }\r\n        case SET_STATUS: {\r\n            return {...partOfState, status: action.status};\r\n        }\r\n        case DELETE_POST: {\r\n            return {...partOfState, posts: partOfState.posts.filter(p => p.id !== action.postId)}\r\n        }\r\n        case SAVE_PHOTOS_SUCCESS: {\r\n            let newCopyOfState = deepCopyFunction(partOfState);\r\n            newCopyOfState.profile.photos.small = action.photos.small;\r\n            newCopyOfState.profile.photos.large = action.photos.large;\r\n            return newCopyOfState;\r\n        }\r\n        default:\r\n            return partOfState;\r\n    }\r\n}\r\n\r\ntype ThunkType = ThunkAction<Promise<void>, AppStateType, unknown, ProfileReducerActionType>;\r\n\r\nexport const showProfileThunkCreator = (userId: number): ThunkType => {\r\n    return async (dispatch) => {\r\n        const data = await ProfileApi.showProfile(userId)\r\n        dispatch(setUserProfile(data));\r\n    }\r\n}\r\n\r\nexport const getStatusThunkCreator = (userId: number): ThunkType => {\r\n    return async (dispatch) => {\r\n        const data = await ProfileApi.getStatus(userId);\r\n        dispatch(setStatus(data));\r\n    }\r\n}\r\n\r\nexport const updateStatusThunkCreator = (status: string): ThunkType => {\r\n    return async (dispatch) => {\r\n        const data = await ProfileApi.updateStatus(status);\r\n        if (data.resultCode === 0) {\r\n            dispatch(setStatus(status));\r\n        }\r\n    }\r\n}\r\n\r\nexport const savePhotoThunkCreator = (file: File): ThunkType => {\r\n    return async (dispatch) => {\r\n        const data = await ProfileApi.savePhoto(file);\r\n        if (data.resultCode === 0) {\r\n            dispatch(savePhoto(data.data.photos));\r\n        }\r\n    }\r\n}\r\n\r\nexport const saveProfileThunkCreator = (formData: ProfileDataForm): ThunkType => {\r\n    return async (dispatch, getState) => {\r\n        const userId = getState().auth.id;\r\n        //debugger;\r\n        const data = await ProfileApi.saveProfile(formData);\r\n        if (data.resultCode === 0) {\r\n            await dispatch(showProfileThunkCreator(userId!))\r\n        } else {\r\n            let errMsg = data.messages.length > 0 ? data.messages[0] : 'Unknown error';\r\n            // @ts-ignore\r\n            dispatch(stopSubmit('edit-profile', {_error: errMsg}))\r\n        }\r\n    }\r\n}\r\n\r\nexport default profileReducer;","import {v1} from \"uuid\";\r\n\r\nexport type FriendType = {\r\n    id: string,\r\n    name: string,\r\n    age?: number,\r\n    picture: string,\r\n}\r\n\r\nexport type FriendsPage = {\r\n    friends: Array<FriendType>\r\n}\r\n\r\ntype FriendsReducerActionType = any;\r\n\r\nlet initialState = {\r\n    friends: [\r\n        {id: v1(), name: \"Nikki\", age: 28, picture: \"#\"},\r\n        {id: v1(), name: \"Anna\", age: 34, picture: \"#\"},\r\n        {id: v1(), name: \"Sveta\", age: 15, picture: \"#\"},\r\n        {id: v1(), name: \"Marco\", age: 28, picture: \"#\"},\r\n        {id: v1(), name: \"Greg\", age: 34, picture: \"#\"},\r\n        {id: v1(), name: \"Agnes\", age: 15, picture: \"#\"}],\r\n}\r\n\r\nconst friendsReducer = (partOfState: FriendsPage = initialState, action: FriendsReducerActionType): FriendsPage => {\r\n    return partOfState;\r\n}\r\n\r\nexport default friendsReducer;","import {ThunkAction} from 'redux-thunk';\r\nimport {AppStateType} from './redux-store';\r\nimport {AuthAPI, securityApi} from '../components/api/api';\r\nimport {stopSubmit} from 'redux-form';\r\n\r\nconst SET_USER_DATA = 'network/auth/SET_USER_DATA';\r\nconst GET_CAPTCHA_URL_SUCCESS = 'network/auth/GET_CAPTCHA_URL_SUCCESS';\r\n\r\ntype setUserDataACType = {\r\n    type: typeof SET_USER_DATA,\r\n    payload: SetAuthUserDataPayloadType,\r\n}\r\n\r\ntype setCaptchaUrlACType = { type: typeof GET_CAPTCHA_URL_SUCCESS, captchaUrl: string }\r\n\r\ntype AuthReducerActionType = setUserDataACType | setCaptchaUrlACType;\r\n\r\ntype SetAuthUserDataPayloadType = {\r\n    userId: number | null\r\n    email: string | null,\r\n    login: string | null,\r\n    isAuth: boolean,\r\n}\r\n\r\nexport const setAuthUserData = (id: number | null, email: string | null, login: string | null, isAuth: boolean): setUserDataACType => ({\r\n    type: SET_USER_DATA,\r\n    payload: {\r\n        userId: id,\r\n        email,\r\n        login,\r\n        isAuth,\r\n    }\r\n})\r\n\r\nexport const setCaptchaUrl = (captcha: string): setCaptchaUrlACType => ({\r\n    type: GET_CAPTCHA_URL_SUCCESS,\r\n    captchaUrl: captcha\r\n})\r\n\r\nexport type UserDataType = {\r\n    id: number | null,\r\n    email: string | null,\r\n    login: string | null,\r\n    isAuth: boolean,\r\n    captchaUrl: string | null,\r\n}\r\n\r\nlet initialState: UserDataType = {\r\n    id: null,\r\n    email: null,\r\n    login: null,\r\n    isAuth: false,\r\n    captchaUrl: null,\r\n}\r\n\r\nconst authReducer = (partOfState = initialState, action: AuthReducerActionType): UserDataType => {\r\n    switch (action.type) {\r\n        case SET_USER_DATA: {\r\n            const {userId, email, login, isAuth} = action.payload;\r\n            return {...partOfState, id: userId, email: email, login: login, isAuth: isAuth}\r\n        }\r\n        case GET_CAPTCHA_URL_SUCCESS: {\r\n            return {...partOfState, captchaUrl: action.captchaUrl}\r\n        }\r\n        default:\r\n            return partOfState;\r\n    }\r\n}\r\n\r\n//TODO change type from any\r\ntype ThunkType = ThunkAction<Promise<any>, AppStateType, unknown, AuthReducerActionType>\r\n\r\nexport const AuthMeThunkCreator = (): ThunkType => {\r\n    return async (dispatch) => {\r\n        let data = await AuthAPI.authMe()\r\n        if (data.resultCode === 0) {\r\n            const {id, email, login} = data.data;\r\n            dispatch(setAuthUserData(id, email, login, true));\r\n        }\r\n        return data;\r\n    }\r\n}\r\n\r\nexport const LoginMeThunkCreator = (login: string, password: string, rememberMe?: boolean, captcha?: boolean): ThunkType => {\r\n    return async (dispatch) => {\r\n        let data = await AuthAPI.loginMe(login, password, rememberMe, captcha)\r\n        if (data.resultCode === 0) {\r\n            await dispatch(AuthMeThunkCreator());\r\n            alert('Successfully logined');\r\n        } else {\r\n            if (data.resultCode === 10) {\r\n                await dispatch(getCaptchaUrl());\r\n            }\r\n            let errMsg = data.messages.length > 0 ? data.messages[0] : 'Unknown error';\r\n            //TODO change type from ignore\r\n            // @ts-ignore\r\n            dispatch(stopSubmit('login', {_error: errMsg}))\r\n        }\r\n    }\r\n}\r\n\r\nexport const LoginOutThunkCreator = (): ThunkType => {\r\n    return async (dispatch) => {\r\n        let data = await AuthAPI.logoutMe()\r\n        if (data.resultCode === 0) {\r\n            alert('Succesfully logout');\r\n            dispatch(setAuthUserData(null, null, null, false))\r\n        }\r\n    }\r\n}\r\n\r\nexport const getCaptchaUrl = (): ThunkType => {\r\n    return async (dispatch) => {\r\n        const {url} = await securityApi.getCaptchaUrl();\r\n        if (url) {\r\n            dispatch(setCaptchaUrl(url))\r\n        }\r\n    }\r\n}\r\n\r\nexport default authReducer;","import {AuthMeThunkCreator} from './auth-reducer';\r\nimport {ThunkAction} from 'redux-thunk';\r\nimport {AppStateType} from './redux-store';\r\n\r\nconst INITIALIZED_SUCCESS = 'network/app/INITIALIZED_SUCCESS';\r\n\r\ntype InitializedSuccessACType = {\r\n    type: typeof INITIALIZED_SUCCESS,\r\n}\r\n\r\ntype AppActionsType = InitializedSuccessACType;\r\n\r\nexport const initializedSuccess = (): InitializedSuccessACType => ({type: INITIALIZED_SUCCESS})\r\n\r\nlet initialState = {\r\n    initialized: false as boolean\r\n}\r\n\r\ntype PartOfStateType = typeof initialState;\r\n\r\n\r\nconst appReducer = (partOfState = initialState, action: AppActionsType): PartOfStateType => {\r\n    switch (action.type) {\r\n        case INITIALIZED_SUCCESS: {\r\n            return {...partOfState, initialized: true}\r\n        }\r\n        default:\r\n            return partOfState;\r\n    }\r\n}\r\n\r\ntype ThunkType = ThunkAction<Promise<void>, AppStateType, unknown, AppActionsType>\r\n\r\nexport const initializeAppThunkCreator = (): ThunkType => {\r\n    return async (dispatch) => {\r\n        await dispatch(AuthMeThunkCreator());\r\n        await dispatch(initializedSuccess());\r\n    }\r\n}\r\n\r\nexport default appReducer;\r\n","import {applyMiddleware, combineReducers, compose, createStore, Store} from 'redux';\r\nimport dialogsReducer from './dialogs-reducer';\r\nimport profileReducer from './profile-reducer';\r\nimport friendsReducer from './friends-reducer';\r\nimport usersReducer from './users-reducer';\r\nimport authReducer from './auth-reducer';\r\nimport thunkMiddleware from 'redux-thunk';\r\nimport {reducer as formReducer} from 'redux-form'\r\nimport appReducer from './app-reducer';\r\n\r\n// наш reducers это фактически state = {profilePage: [data], dialogsPage: [data], friendsPage: [data]}\r\nlet reducers = combineReducers({\r\n    //combinre all reducers in one object = state\r\n    profilePage: profileReducer,\r\n    dialogsPage: dialogsReducer,\r\n    usersPage: usersReducer,\r\n    friendsPage: friendsReducer,\r\n    auth: authReducer,\r\n    form: formReducer,\r\n    app: appReducer,\r\n});\r\n\r\nexport type AppStateType = ReturnType<typeof reducers>\r\n\r\ndeclare global {\r\n    interface Window {\r\n        __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\r\n    }\r\n}\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\nconst store: Store = createStore(reducers, /* preloadedState, */ composeEnhancers(\r\n    applyMiddleware(thunkMiddleware)\r\n));\r\n\r\n//let store: Store = createStore(reducers, applyMiddleware(thunkMiddleware));\r\n\r\n// @ts-ignore\r\nwindow.store = store;\r\n\r\nexport default store;","import React from \"react\";\r\n\r\nimport s from \"./header.module.css\";\r\nimport logo from \"../icons/whatsapp.png\"\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\ntype HeaderType = {\r\n    login: string | null,\r\n    isAuth: boolean,\r\n    LoginOutThunkCreator: () => void,\r\n}\r\n\r\nconst Header: React.FC<HeaderType> = (props) => {\r\n    return (\r\n        <header className={s.header}>\r\n            <img src={logo} alt=\"study logo\"/>\r\n            <h2>{\"Let's talk\"}</h2>\r\n            <div className={s.loginBlock}>\r\n                {props.isAuth ?\r\n                    <div>{props.login} - <button onClick={props.LoginOutThunkCreator}>Log out</button></div>\r\n                    : <NavLink to={'/login'}>Login</NavLink>}\r\n            </div>\r\n        </header>\r\n    )\r\n}\r\n\r\nexport default Header;","import React, {Component} from \"react\";\r\nimport Header from \"./header\";\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from \"../../redux/redux-store\";\r\nimport {LoginOutThunkCreator} from \"../../redux/auth-reducer\";\r\n\r\ntype HeaderContainerType = {\r\n    login: string | null,\r\n    isAuth: boolean,\r\n    LoginOutThunkCreator: () => void,\r\n}\r\n\r\nclass HeaderContainer extends Component<HeaderContainerType, {}> {\r\n\r\n    render() {\r\n        return (\r\n            <Header {...this.props}/>\r\n        );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType) => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        login: state.auth.login,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {LoginOutThunkCreator })(HeaderContainer);","import Friends from \"./friends\";\r\n\r\nexport default Friends;","import React from \"react\";\r\n\r\nimport css from \"./friends.module.css\";\r\nimport {NavbarType} from \"../navbar/navbar\";\r\nimport {FriendType} from \"../../redux/friends-reducer\";\r\n\r\nconst renderFriends = (arr: Array<FriendType>) => {\r\n    return arr.map(friend => {\r\n                return (\r\n                    <div key={friend.id} className={css.oneFriendWrapper}>\r\n                        <div className={css.oneFriendPicture}></div>\r\n                        <div className={css.oneFriendName}>{friend.name}</div>\r\n                    </div>\r\n                )\r\n    })\r\n}\r\n\r\nconst Friends: React.FC<NavbarType> = (props: any) => {\r\n    return (\r\n        <div className={css.friendsWrapper}>\r\n            {renderFriends(props.data.friends)}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Friends;","import Navbar from \"./navbar\"\r\n\r\nexport default Navbar;","import React from \"react\";\r\n\r\nimport cssClasses from \"./navbar.module.css\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport Friends from \"../friends\";\r\nimport {FriendType} from \"../../redux/friends-reducer\";\r\n\r\nexport type NavbarType = {\r\n    data: DataType\r\n}\r\n\r\nexport type DataType = {\r\n    friends: Array<FriendType>\r\n}\r\n\r\nconst Navbar: React.FC<NavbarType> = ({data}) => {\r\n    return (\r\n\r\n        <nav className={cssClasses.nav}>\r\n            <div className={cssClasses.item}><NavLink activeClassName={cssClasses.activeLink}\r\n                                                      to=\"/profile\">Profile</NavLink></div>\r\n            <div className={cssClasses.item}><NavLink activeClassName={cssClasses.activeLink}\r\n                                                      to=\"/dialogs\">Messages</NavLink></div>\r\n            <div className={cssClasses.item}><NavLink activeClassName={cssClasses.activeLink}\r\n                                                      to=\"/users\">Users</NavLink></div>\r\n            <div className={cssClasses.item}><NavLink activeClassName={cssClasses.activeLink}\r\n                                                      to=\"/news\">News</NavLink>\r\n            </div>\r\n            <div className={cssClasses.item}><NavLink activeClassName={cssClasses.activeLink}\r\n                                                      to=\"/music\">Music</NavLink></div>\r\n            <div className={cssClasses.item}><NavLink activeClassName={cssClasses.activeLink}\r\n                                                      to=\"/settings\">Settings</NavLink></div>\r\n            <div className={cssClasses.item}><NavLink activeClassName={cssClasses.activeLink}\r\n                                                      to=\"/friends\">Friends</NavLink></div>\r\n            <Friends data={data}/>\r\n\r\n        </nav>\r\n\r\n    )\r\n}\r\n\r\nexport default Navbar;","import React, {ChangeEvent, useEffect, useState} from \"react\";\r\n\r\ntype PropsType = {\r\n    status: string,\r\n    updateStatus: (status: string) => void,\r\n}\r\n\r\nconst ProfileStatusHooks: React.FC<PropsType> = (props) => {\r\n    const [editMode, setEditMode] = useState<boolean>(false);\r\n    const [status, setStatus] = useState<string>(props.status);\r\n\r\n    useEffect(() => {\r\n        setStatus(props.status)\r\n    }, [props.status]);\r\n\r\n    const activateEditMode = () => {\r\n        setEditMode(true);\r\n    }\r\n\r\n    const deactivateEditMode = () => {\r\n        setEditMode(false);\r\n        props.updateStatus(status);\r\n    }\r\n\r\n    const onStatusChange = (e: ChangeEvent<HTMLInputElement>) => {\r\n        setStatus(e.currentTarget.value)\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {\r\n                !editMode &&\r\n                <div>\r\n            <span\r\n                onDoubleClick={activateEditMode}>{`Status: `}{props.status || \"No status\"}</span>\r\n                </div>\r\n            }\r\n            {\r\n                editMode &&\r\n                <div>\r\n                    <input onChange={onStatusChange}\r\n                           autoFocus={true}\r\n                           onBlur={deactivateEditMode}\r\n                           value={status}/>\r\n                </div>\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ProfileStatusHooks;","import React, {ChangeEvent} from 'react';\r\nimport css from './ProfileData.module.css';\r\nimport saitama from '../../../assets/images/saitama.png';\r\nimport ProfileStatusHooks from '../profileinfo/ProfileStatusHooks';\r\nimport {updateStatusThunkCreator, UserProfileType} from '../../../redux/profile-reducer';\r\n\r\ntype ProfileDataType = {\r\n    profile: UserProfileType,\r\n    savePhoto: (file: File) => void,\r\n    status: string,\r\n    isOwner: boolean,\r\n    gotoEditMode: () => void,\r\n}\r\n\r\nexport const ProfileData: React.FC<ProfileDataType> = ({profile, savePhoto, status, isOwner, gotoEditMode}) => {\r\n    const onMainPhotoSelected = (e: ChangeEvent<HTMLInputElement>) => {\r\n        if (e.currentTarget.files!.length) {\r\n            savePhoto(e.currentTarget.files![0]);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <div className={css.mainInfo}>\r\n                {isOwner && <div>\r\n                    <button className={css.btn} onClick={gotoEditMode}>Edit</button>\r\n                </div>}\r\n                <div className={css.personImg}>\r\n                    <img className={css.profImg}\r\n                         src={profile!.photos.small || saitama}\r\n                         alt={''}/>\r\n                    {isOwner && <input onChange={onMainPhotoSelected} type={'file'}/>}\r\n                </div>\r\n                <div className={css.userInfo}>\r\n                    <h2>{profile!.fullName}</h2>\r\n                    <ProfileStatusHooks status={status} updateStatus={updateStatusThunkCreator}/>\r\n                    <p>{`looking for a job : ${profile!.lookingForAJob}`}</p>\r\n                    {profile!.lookingForAJob && <p>{`job description: ${profile!.lookingForAJobDescription}`}</p>}\r\n                    <p>{`About me: `}{profile!.aboutMe ? profile!.aboutMe : 'null'}</p>\r\n                    <hr/>\r\n                    <div className={css.textWrapper}>\r\n                        <span>{`fb: ${profile!.contacts.facebook}`}</span>\r\n                        <span>{`github: ${profile!.contacts.github}`}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </React.Fragment>\r\n    )\r\n}","import React from 'react';\r\nimport {createField, CustomInput, CustomTextArea} from '../../common/FormsControl/FormsControl';\r\nimport {InjectedFormProps, reduxForm} from 'redux-form'\r\nimport s from './ProfileDataForm.module.scss';\r\n\r\nexport type ProfileDataForm = {\r\n    aboutMe: string,\r\n    fullName: string,\r\n    lookingForAJob: boolean,\r\n    lookingForAJobDescription: string,\r\n    initialValues: any\r\n}\r\n\r\ntype ProfileDataFormType = {\r\n    onSubmit: (formData: ProfileDataForm) => void,\r\n}\r\n\r\nconst ProfileDataForm: React.FC<InjectedFormProps<ProfileDataForm, ProfileDataFormType> & ProfileDataFormType> =\r\n    ({handleSubmit, error}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit} className={s.formWrapper}>\r\n            <button className={s.formWrapper__btn}>Submit</button>\r\n            {error && <div className={s.formWrapper__error}>{error}</div>}\r\n            <div className={s.formWrapper__name}>\r\n                <b>Full name:</b> {createField('fullName', 'Full name:', 'text', CustomInput, [])}\r\n            </div>\r\n            <div className={s.formWrapper__job}>\r\n                <b>Looking for a job:</b> {createField('lookingForAJob', '', 'checkbox', CustomInput, [])}\r\n            </div>\r\n            <div className={s.formWrapper__skills}>\r\n                <b>My professional\r\n                    skills:</b>{createField('lookingForAJobDescription', 'my skills:', '', CustomTextArea, [])}\r\n            </div>\r\n            <div className={s.formWrapper__about}>\r\n                <b>About me:</b>{createField('aboutMe', 'About me:', 'tex', CustomTextArea, [])}\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst ProfileDataFormReduxForm = reduxForm<ProfileDataForm, ProfileDataFormType>({form: 'edit-profile'})(ProfileDataForm)\r\n\r\nexport default ProfileDataFormReduxForm;\r\n","import ProfileInfo from \"./profileinfo\";\r\n\r\nexport default ProfileInfo;","import React, {useEffect, useState} from 'react';\r\n\r\nimport css from './profileinfo.module.css';\r\nimport {UserProfileType} from '../../../redux/profile-reducer';\r\nimport {Preloader} from '../../common/Preloader/Preloader';\r\nimport {ProfileData} from '../profiledata/ProfileData';\r\nimport ProfileDataFormReduxForm, {ProfileDataForm} from '../ProfileDataForm/ProfileDataForm';\r\n\r\ntype ProfileInfoType = {\r\n    profile: UserProfileType,\r\n    status: string,\r\n    updateStatusThunkCreator: (status: string) => void,\r\n    isOwner: boolean,\r\n    savePhoto: (file: File) => void,\r\n    saveProfile: (formData: ProfileDataForm) => void,\r\n}\r\n\r\nconst ProfileInfo: React.FC<ProfileInfoType> = (props) => {\r\n    const [editMode, setEditMode] = useState<boolean>(false);\r\n\r\n    const onSubmit = (formData: ProfileDataForm) => {\r\n        //console.log(formData);\r\n        props.saveProfile(formData);\r\n    }\r\n\r\n    useEffect(() => {\r\n        setEditMode(false);\r\n    }, [props.profile])\r\n\r\n    if (!props.profile) {\r\n        return <Preloader/>\r\n    } else {\r\n        return (\r\n            <div className={css.wrapper}>\r\n                <div className={css.border}>\r\n                    <img className={css.bgImg}\r\n                         src=\"https://cdn57.androidauthority.net/wp-content/uploads/2015/11/00-best-backgrounds-and-wallpaper-apps-for-android.jpg\"\r\n                         alt={'attractda'}/>\r\n                </div>\r\n                {editMode ? <ProfileDataFormReduxForm onSubmit={onSubmit} initialValues={props.profile}/> :\r\n                    <ProfileData profile={props.profile} status={props.status} savePhoto={props.savePhoto}\r\n                                 isOwner={props.isOwner} gotoEditMode={() => setEditMode(true)}/>}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ProfileInfo;","import Post from \"./post\";\r\n\r\nexport default Post;","import React from \"react\";\r\n\r\nimport css from \"./post.module.css\";\r\nimport like from \"../../icons/heart.png\";\r\n\r\ntype RootType = {\r\n    message: string,\r\n    likesCount: number\r\n}\r\n\r\nconst Post: React.FC<RootType> = (props) => {\r\n    return (\r\n        <div className={`${css.item} ${css.active}`}>\r\n            <img className={css.avatar}\r\n                 src=\"https://img1.ak.crunchyroll.com/i/spire3/3614810e9ada5235038e8deb4adc264c1447729591_large.jpg\"\r\n                 alt=\"avator of user\"/>\r\n            <p>{props.message}</p>\r\n            <div>\r\n                <span>{props.likesCount}</span>\r\n                <img src={like} className={css.like} alt={`like logo`}>{}</img>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Post;","import React from \"react\";\r\n\r\nimport css from \"./myposts.module.css\";\r\nimport Post from \"../post\";\r\nimport {PostType} from \"../../../redux/profile-reducer\";\r\nimport {Field, InjectedFormProps, reduxForm} from \"redux-form\";\r\nimport {maxLengthCreator, required} from \"../../utils/validators/validators\";\r\nimport {CustomTextArea} from \"../../common/FormsControl/FormsControl\";\r\n\r\ntype MyPostsType = {\r\n    posts: Array<PostType>,\r\n    addPost: (postMsg: string) => void,\r\n}\r\n\r\n\r\nconst MyPosts: React.FC<MyPostsType> = React.memo(({posts, addPost}) => {\r\n\r\n        let postElements = posts.map((post) => {\r\n            return (\r\n                <Post message={post.message} likesCount={post.likesCount} key={post.id}/>\r\n            )\r\n        })\r\n\r\n        const onSubmitHandler = (formData: FormDataType) => {\r\n            addPost(formData.newPostMessage);\r\n        }\r\n\r\n        return (\r\n            <div className={css.postsBlock}>\r\n                <div className={css.addPostBlock}>\r\n                    <h3>{`Create your post :`}</h3>\r\n                    <MyPostsReduxForm onSubmit={onSubmitHandler}/>\r\n                </div>\r\n                <div className={css.posts}>\r\n                    {postElements}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n)\r\n\r\ntype FormDataType = {\r\n    newPostMessage: string,\r\n}\r\ntype MyPostsFormType = {\r\n    onSubmit: (formData: FormDataType) => void,\r\n}\r\nconst maxLength10 = maxLengthCreator(10);\r\n\r\nconst MyPostsForm: React.FC<InjectedFormProps<FormDataType, MyPostsFormType> & MyPostsFormType> = (props) => {\r\n    return (\r\n        <form onSubmit={props.handleSubmit}>\r\n            <div>\r\n                <Field name={\"newPostMessage\"} placeholder={`type here:`} component={CustomTextArea}\r\n                       validate={[required, maxLength10]}/>\r\n            </div>\r\n            <div>\r\n                <button>Add post</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst MyPostsReduxForm = reduxForm<FormDataType, MyPostsFormType>({\r\n    form: 'ProfileAddNewPostForm'\r\n})(MyPostsForm)\r\n\r\nexport default MyPosts;","import {addPostAC} from \"../../../redux/profile-reducer\";\r\nimport MyPosts from './myPosts';\r\nimport {connect} from \"react-redux\";\r\nimport {AppStateType} from \"../../../redux/redux-store\";\r\nimport {Dispatch} from \"redux\";\r\n\r\nlet mapStateToProps = (state: AppStateType) => {\r\n    return {\r\n        posts: state.profilePage.posts,\r\n    }\r\n}\r\n\r\nlet mapDispatchToProps = (dispatch: Dispatch) => {\r\n    return {\r\n        addPost: (text: string) => dispatch(addPostAC(text)),\r\n    }\r\n}\r\n\r\nconst MyPostsContainer = connect(mapStateToProps, mapDispatchToProps)(MyPosts);\r\n\r\nexport default MyPostsContainer;","import React from \"react\";\r\nimport ProfileInfo from \"./profileinfo\";\r\nimport MyPostsContainer from \"./myposts/myPostsContainer\"\r\nimport {UserProfileType} from \"../../redux/profile-reducer\";\r\nimport {ProfileDataForm} from './ProfileDataForm/ProfileDataForm';\r\n\r\ntype ProfileType = {\r\n    profile: UserProfileType,\r\n    status: string,\r\n    updateStatusThunkCreator: (status: string) => void,\r\n    isOwner: boolean,\r\n    savePhoto: (file:File) => void,\r\n    saveProfile: (formData: ProfileDataForm) => void,\r\n}\r\n\r\nconst Profile: React.FC<ProfileType> = ({saveProfile, savePhoto, isOwner, profile, status, updateStatusThunkCreator}) => {\r\n    return (\r\n        <div>\r\n            <ProfileInfo saveProfile={saveProfile} savePhoto={savePhoto} isOwner={isOwner} profile={profile} status={status} updateStatusThunkCreator = {updateStatusThunkCreator}/>\r\n            <MyPostsContainer/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Profile;","import React, {PureComponent} from 'react';\r\nimport Profile from './profile';\r\nimport {connect} from 'react-redux';\r\nimport {AppStateType} from '../../redux/redux-store';\r\nimport {\r\n    getStatusThunkCreator, savePhotoThunkCreator, saveProfileThunkCreator,\r\n    showProfileThunkCreator,\r\n    updateStatusThunkCreator,\r\n    UserProfileType\r\n} from '../../redux/profile-reducer';\r\nimport {RouteComponentProps, withRouter} from 'react-router-dom';\r\nimport {ProfileDataForm} from './ProfileDataForm/ProfileDataForm';\r\n\r\ntype TParams = {\r\n    userId: string,\r\n}\r\n\r\ntype ProfileContainerType = RouteComponentProps<TParams> & {\r\n    profile: UserProfileType,\r\n    isAuth: boolean,\r\n    status: string,\r\n    authorizedUserId: number | null,\r\n    showProfileThunkCreator: (userId: number) => void,\r\n    getStatusThunkCreator: (userId: number) => void,\r\n    updateStatusThunkCreator: (status: string) => void,\r\n    savePhotoThunkCreator: (file: File) => void,\r\n    saveProfileThunkCreator: (formData: ProfileDataForm) => void,\r\n};\r\n\r\nclass ProfileContainer extends PureComponent<ProfileContainerType, {}> {\r\n\r\n    refreshProfile() {\r\n        let userId: string | number | null = this.props.match.params.userId\r\n        if (!userId) {\r\n            userId = this.props.authorizedUserId;\r\n            if (!userId) {\r\n                this.props.history.push('/login');\r\n                return;\r\n            }\r\n        }\r\n        this.props.showProfileThunkCreator(Number(userId));\r\n        this.props.getStatusThunkCreator(Number(userId));\r\n    }\r\n\r\n    componentDidMount() {\r\n        //debugger\r\n        this.refreshProfile();\r\n    }\r\n\r\n    componentDidUpdate(prevProps: Readonly<ProfileContainerType>, prevState: Readonly<{}>, snapshot?: any) {\r\n        if (this.props.match.params.userId !== prevProps.match.params.userId) {\r\n            this.refreshProfile();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Profile {...this.props} profile={this.props.profile} status={this.props.status}\r\n                     updateStatusThunkCreator={this.props.updateStatusThunkCreator}\r\n                     isOwner={!this.props.match.params.userId}\r\n                     savePhoto={this.props.savePhotoThunkCreator}\r\n                     saveProfile={this.props.saveProfileThunkCreator}\r\n            />\r\n        )\r\n    }\r\n}\r\n\r\ntype MapStatePropsType = {\r\n    profile: UserProfileType,\r\n    isAuth: boolean,\r\n    status: string,\r\n    authorizedUserId: number | null,\r\n}\r\n\r\n// get state => throw state to props\r\nlet mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n    return {\r\n        profile: state.profilePage.profile,\r\n        isAuth: state.auth.isAuth,\r\n        status: state.profilePage.status,\r\n        authorizedUserId: state.auth.id\r\n    }\r\n}\r\n\r\n// return component with RoutePath\r\nlet withUrlDataContainerComponent = withRouter(ProfileContainer); // withRedirect()\r\n\r\nexport default connect(mapStateToProps, {\r\n    showProfileThunkCreator,\r\n    getStatusThunkCreator,\r\n    updateStatusThunkCreator,\r\n    savePhotoThunkCreator,\r\n    saveProfileThunkCreator,\r\n})(withUrlDataContainerComponent);","import React from 'react';\r\n\r\nimport s from './login.module.scss';\r\nimport {Field, InjectedFormProps, reduxForm} from 'redux-form'\r\nimport {AppStateType} from '../../redux/redux-store';\r\nimport {createField, CustomInput} from '../common/FormsControl/FormsControl';\r\nimport {maxLengthCreator, required} from '../utils/validators/validators';\r\nimport {connect} from 'react-redux';\r\nimport {LoginMeThunkCreator, LoginOutThunkCreator} from '../../redux/auth-reducer';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\ntype FormData = {\r\n    email: string,\r\n    password: string,\r\n    rememberMe?: boolean,\r\n    captcha?: boolean,\r\n}\r\ntype LoginFormType = {\r\n    onSubmit: (formData: FormData) => void,\r\n    captcha: string | null,\r\n}\r\n\r\ntype LoginType = {\r\n    isAuth: boolean,\r\n    captchaUrl: string | null,\r\n    LoginMeThunkCreator: (login: string, password: string, rememberMe?: boolean, captcha?: boolean) => void,\r\n    LoginOutThunkCreator: () => void,\r\n}\r\n\r\nconst Login: React.FC<LoginType> = ({isAuth, captchaUrl, LoginMeThunkCreator}) => {\r\n\r\n    const onSubmitHandler = (formData: FormData) => {\r\n        if (!isAuth) {\r\n            //console.log(formData);\r\n            const {email, password, rememberMe, captcha} = formData;\r\n            LoginMeThunkCreator(email, password, rememberMe, captcha);\r\n        }\r\n    }\r\n\r\n    if (isAuth) {\r\n        return <Redirect to={'/profile'}/>\r\n    }\r\n\r\n    return (\r\n        <div className={s.wrapper}>\r\n            <h1>Login</h1>\r\n            <LoginReduxForm captcha={captchaUrl} onSubmit={onSubmitHandler}/>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst maxLength30 = maxLengthCreator(30);\r\nconst maxLength10 = maxLengthCreator(10);\r\n\r\nconst LoginForm: React.FC<InjectedFormProps<FormData, LoginFormType> & LoginFormType> = ({handleSubmit, error, captcha}) => {\r\n    return (\r\n        <form onSubmit={handleSubmit} className={s.form}>\r\n            {createField('email', `Login:`, 'text', CustomInput, [required, maxLength30])}\r\n            {createField('password', `Password:`, 'password', CustomInput, [required, maxLength30])}\r\n            <div className={s.remember}>\r\n                <Field name={'rememberMe'} component={CustomInput} type=\"checkbox\"/>\r\n                <span className={s.remember__span}>remember me</span>\r\n            </div>\r\n            {captcha && <img src={captcha} alt=\"captcha\"/>}\r\n            {captcha && createField('captcha', '', 'text', CustomInput, [maxLength10])}\r\n            {error && <div className={s.summaryError}>{error}</div>}\r\n            <div>\r\n                <button>Login</button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nconst LoginReduxForm = reduxForm<FormData, LoginFormType>({\r\n    // a unique name for the form\r\n    form: 'login'\r\n})(LoginForm)\r\n\r\ntype MapStateToProps = {\r\n    isAuth: boolean,\r\n    captchaUrl: string | null,\r\n}\r\n\r\nlet mapStateToProps = (state: AppStateType): MapStateToProps => {\r\n    return {\r\n        isAuth: state.auth.isAuth,\r\n        captchaUrl: state.auth.captchaUrl,\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, {LoginMeThunkCreator, LoginOutThunkCreator})(Login);","import React, {Suspense} from 'react';\r\nimport {Preloader} from '../common/Preloader/Preloader';\r\n\r\nexport const withSuspense = <P extends object>(Component: React.ComponentType<P>) => {\r\n    return (props: P) => {\r\n        return <Suspense fallback={<Preloader/>}><Component {...props}/></Suspense>\r\n    }\r\n}","import React from 'react';\r\nimport {Route, withRouter, Switch, Redirect} from 'react-router-dom'\r\n\r\nimport './app.css';\r\nimport HeaderContainer from './components/header/HeaderContainer';\r\nimport Navbar from './components/navbar';\r\nimport store, {AppStateType} from './redux/redux-store';\r\nimport ProfileContainer from './components/profile/ProfileContainer';\r\nimport Login from './components/login/login';\r\nimport {connect} from 'react-redux';\r\nimport {compose} from 'redux';\r\nimport {initializeAppThunkCreator} from './redux/app-reducer';\r\nimport {Preloader} from './components/common/Preloader/Preloader';\r\nimport {withSuspense} from './components/hoc/withSuspense';\r\n\r\nconst DialogsContainer = React.lazy(() => import('./components/dialogs/dialogsContainer'));\r\nconst UsersContainer = React.lazy(() => import('./components/users/UsersContainer'));\r\nconst News = React.lazy(() => import('./components/news'));\r\nconst Music = React.lazy(() => import('./components/music'));\r\nconst Settings = React.lazy(() => import('./components/settings'));\r\n\r\ntype AppPropsType = {\r\n    initializeAppThunkCreator: () => void,\r\n    initialized: boolean,\r\n}\r\n\r\nclass App extends React.Component<AppPropsType, {}> {\r\n\r\n    componentDidMount() {\r\n        this.props.initializeAppThunkCreator();\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.initialized) {\r\n            return <Preloader/>\r\n        }\r\n\r\n        const {friendsPage} = store.getState();\r\n\r\n        return (\r\n            <div className=\"app-wrapper\">\r\n                <HeaderContainer/>\r\n                <Navbar data={friendsPage}/>\r\n                <div className=\"app-wrapper-content\">\r\n                    <Switch>\r\n                        <Route exact path=\"/\"><Redirect to=\"/profile\"/>\r\n                        </Route>\r\n\r\n                        <Route path='/profile/:userId?' render={() => <ProfileContainer/>}/>\r\n\r\n                        <Route path='/dialogs' render={withSuspense(DialogsContainer)}/>\r\n\r\n                        <Route path='/users' component={withSuspense(UsersContainer)}/>\r\n                        <Route path='/login' render={() => <Login/>}/>\r\n\r\n                        <Route path='/news' render={withSuspense(News)}/>\r\n                        <Route path='/music' render={withSuspense(Music)}/>\r\n                        <Route path='/settings' render={withSuspense(Settings)}/>\r\n                        <Route path='*' render={() => <div>{`404 Not Fount`}</div>}/>\r\n                    </Switch>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\ntype MapStateToPropsType = {\r\n    initialized: boolean\r\n}\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStateToPropsType => ({\r\n    initialized: state.app.initialized\r\n})\r\n\r\nexport default compose(\r\n    withRouter,\r\n    connect(mapStateToProps, {initializeAppThunkCreator})\r\n)(App) as React.ComponentClass;","import ReactDOM from 'react-dom';\nimport React from 'react';\nimport {HashRouter} from 'react-router-dom';\nimport store from './redux/redux-store';\nimport App from './App';\nimport {Provider} from 'react-redux';\n\n// const rerenderEntireTree = (state: AppStateType) => {\n//BrowserRouter basename= {}\n\nReactDOM.render(\n    <React.StrictMode>\n        <HashRouter>\n            <Provider store={store}>\n                <App/>\n            </Provider>\n        </HashRouter>\n    </React.StrictMode>,\n    document.getElementById('root')\n);\n// }\n// rerenderEntireTree(store.getState());\n\n// store.subscribe(rerenderEntireTree);\n/*store.subscribe(() => {\n    let state = store.getState();\n    rerenderEntireTree(state);\n})*/\n\n\n\n\n","export type FieldValidatorType = (value: string) => string | undefined;\r\n\r\nexport const required: FieldValidatorType = (value) => {\r\n    if (value) return undefined;\r\n    return \"Field is required\";\r\n}\r\n\r\nexport const maxLengthCreator = (max: number): FieldValidatorType => {\r\n    return (value= '') => {\r\n        if (value.trim().length > max) return `Max length is ${max}`;\r\n        return undefined;\r\n    }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formWrapper__name\":\"ProfileDataForm_formWrapper__name__1ckNO\",\"formWrapper__job\":\"ProfileDataForm_formWrapper__job__2KJiZ\",\"formWrapper__skills\":\"ProfileDataForm_formWrapper__skills__1_G5f\",\"formWrapper__about\":\"ProfileDataForm_formWrapper__about__2xvBv\",\"formWrapper\":\"ProfileDataForm_formWrapper__3Nt1T\",\"formWrapper__btn\":\"ProfileDataForm_formWrapper__btn__4mqxQ\",\"formWrapper__error\":\"ProfileDataForm_formWrapper__error__3waQ2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bgImg\":\"ProfileData_bgImg__1Zlsg\",\"profImg\":\"ProfileData_profImg__1dWZP\",\"mainInfo\":\"ProfileData_mainInfo__2uyYH\",\"userInfo\":\"ProfileData_userInfo__2grId\",\"textWrapper\":\"ProfileData_textWrapper__VPt5t\",\"personImg\":\"ProfileData_personImg__8Mq7e\",\"btn\":\"ProfileData_btn__3Ldo6\"};","import preloader from \"../../../assets/images/preloader.svg\";\r\nimport React from \"react\";\r\n\r\nconst inlineStyle = {\r\n    display: \"block\",\r\n    width: \"150px\",\r\n    height: \"100px\",\r\n    margin: \"0 auto\",\r\n}\r\n\r\nexport const Preloader = () => {\r\n    return (\r\n        <img style={inlineStyle} src={preloader} alt=\"preloader\"/>\r\n    )\r\n}\r\n\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"login_wrapper__2Sphf\",\"form\":\"login_form__3i8X8\",\"remember\":\"login_remember__2F0y_\",\"remember__span\":\"login_remember__span__2Erar\",\"summaryError\":\"login_summaryError__3BF3U\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"friendsWrapper\":\"friends_friendsWrapper__2Wbzo\",\"oneFriendWrapper\":\"friends_oneFriendWrapper__1NM6C\",\"oneFriendPicture\":\"friends_oneFriendPicture__3sxfO\",\"oneFriendName\":\"friends_oneFriendName__1_dq3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textarea\":\"FormsControl_textarea__3M2Eb\",\"textarea__span\":\"FormsControl_textarea__span__UrvnO\",\"textarea_error\":\"FormsControl_textarea_error__2fWNP\",\"input__span\":\"FormsControl_input__span__2GN6c\",\"input_error\":\"FormsControl_input_error__15zn2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"post_item__i9nee\",\"like\":\"post_like__Ps27T\",\"active\":\"post_active__1pKhW\",\"avatar\":\"post_avatar__2IpEy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bgImg\":\"profileinfo_bgImg__2SdzC\",\"profImg\":\"profileinfo_profImg__3EXSr\",\"mainInfo\":\"profileinfo_mainInfo__JiQrM\",\"userInfo\":\"profileinfo_userInfo__K9H8_\",\"textWrapper\":\"profileinfo_textWrapper__2MRCN\",\"personImg\":\"profileinfo_personImg__1mo1V\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"postsBlock\":\"myposts_postsBlock__3rH13\",\"posts\":\"myposts_posts__Bw7D6\",\"addPostBlock\":\"myposts_addPostBlock__2M4fL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"header_header__3ZcH0\",\"loginBlock\":\"header_loginBlock__3A-GX\"};"],"sourceRoot":""}